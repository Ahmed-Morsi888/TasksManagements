<div class="card flex justify-center">
  
    <p-button (click)="showDialog()" severity="info" [label]=label() />
    
    <p-dialog (onHide)="onDialogClose()" header="Task" [modal]="true" focusOnShow="false" (visibleChange)="visible.set($event)" [visible]="visible()" [style]="{ width: '28rem' }">
      <form [formGroup]="addTask" (ngSubmit)="onSubmit(addTask)">
        <span class="p-text-secondary block mb-6">Add information Task</span>
        
        <div class="flex flex-col justify-center items-start gap-2">
          <div class="flex flex-col gap-1 mb-4">
            <div class="flex items-center gap-2">
              <label for="taskName" class="font-semibold w-25">Task name</label>
              <input type="text" formControlName="taskName" id="taskName" name="taskName"
              class="p-2 border-2 w-68 border-gray-400 rounded-lg" />
            </div>
            <div>
              @if (
                addTask.get(`taskName`)?.getError('required') && addTask.get(`taskName`)?.touched
              ) {
                <p class="text-red-500 mt-1 text-sm">Task name is required</p>
              }
            </div>
          </div>
          
          <div class="flex flex-col mb-4">
            <div class="flex items-center gap-2">
              <label for="description" class="font-semibold w-25">Description</label>
              <textarea formControlName="description" class="p-2 border-2 w-68 h-40 border-gray-400 rounded-lg"
              name="description" id="description"></textarea>
            </div>
            <div>
              @if (
                addTask.get(`description`)?.getError('required') &&
                addTask.get(`description`)?.touched
              ) {
                <p class="text-red-500 mt-1 text-sm">description is required</p>
              }
              @if (
                addTask.get(`description`)?.getError('minlength') &&
                addTask.get(`description`)?.touched
              ) {
                <p class="text-red-500 mt-1 text-sm">min length is 10 characters</p>
              }
              @if (
                addTask.get(`description`)?.getError('maxlength') &&
                addTask.get(`description`)?.touched
              ) {
                <p class="text-red-500 mt-1 text-sm">max length is 200 characters</p>
              }
            </div>
          </div>
          <div class="flex flex-col mb-4">
            <div class="flex items-center mb-4 gap-2">
              <label for="Status" class="font-semibold w-25">Status</label>
              <select formControlName="status" class="p-2 border-2 w-68 border-gray-400 rounded-lg" name="status"
              id="status">
              <option class="text-gray-300" value="">select status</option>
              <option value="Done">Done</option>
              <option value="Done">Inprogress</option>
              <option value="Pending">Pending</option>
              <option value="Planed">Planed</option>
            </select>
          </div>
          @if (addTask.get(`status`)?.getError('required') && addTask.get(`status`)?.touched) {
            <p class="text-red-500 mt-1 text-sm">Status is required</p>
          }
        </div>
        
        <div class="flex flex-col mb-4">
          <div class="flex items-center">
            <label for="Priority" class="font-semibold w-25">Priority</label>
            <select formControlName="priority" class="p-2 border-2 w-68 border-gray-400 rounded-lg" name="Priority"
            id="Priority">
            <option class="text-gray-300" value="">select Priority</option>
            <option value="High">High</option>
            <option value="Medium">Medium</option>
            <option value="Low">Low</option>
          </select>
        </div>
        @if (addTask.get(`priority`)?.getError('required') && addTask.get(`priority`)?.touched) {
          <p class="text-red-500 mt-1 text-sm">Priority is required</p>
        }
      </div>
      
      <div class="flex flex-col mb-4">
        <div class="flex items-center gap-2">
          <label for="duration" class="font-semibold w-25">Duration</label>
          <input placeholder="2 weeks/days/Hours" type="text" formControlName="duration" id="duration" name="duration"
          class="p-2 border-2 w-68 border-gray-400 rounded-lg" />
        </div>
        @if (addTask.get(`duration`)?.getError('required') && addTask.get(`duration`)?.touched) {
          <p class="text-red-500 mt-1 text-sm">Duration is required</p>
        }
      </div>
      
      <div class="flex flex-col mb-4">
        <div class="flex items-center mb-4 gap-2">
          <label for="createAt" class="font-semibold w-25">createAt</label>
          <input type="date" formControlName="createAt" id="createAt"
          class="p-2 border-2 w-68 border-gray-400 rounded-lg" />
        </div>
        @if (
          addTask.get(`createAt`)?.getError('required') && addTask.get(`createAt`)?.touched
        ) {
          <p class="text-red-500 mt-1 text-sm">Create data is required</p>
        }
      </div>
      
      <div class="flex items-center mb-4 gap-2">
        <label for="dueDate" class="font-semibold w-25">due Date</label>
        <input type="date" formControlName="dueDate" id="dueDate"
        class="p-2 border-2 w-68 border-gray-400 rounded-lg" />
      </div>
      
      <div class="flex gap-2 ms-auto">
        <button type="reset"
        class="w-20 py-2 font-medium bg-gray-800 text-white rounded-lg cursor-pointer hover:bg-gray-900">
        reset
      </button>
      
      @if(updatemode()){
        <button  type="submit"
        class="w-20 py-2 font-medium bg-gray-50 text-black rounded-lg hover:bg-gray-900 hover:text-white cursor-pointer" >  Update  </button>
      }@else {
        <button  type="submit"
        class="w-20 py-2 font-medium bg-gray-50 text-black rounded-lg hover:bg-gray-900 hover:text-white cursor-pointer">  submit
      </button>
    }
    
  </div>
</div>
</form>
</p-dialog>

</div>